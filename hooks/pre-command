# Map the plugin inputs to build meta-data values
buildkite-agent meta-data set "CONDITIONAL_PIPELINE_SLUG" "$BUILDKITE_PLUGIN_CONDITIONAL_PIPELINE_BUILDER_CONDITIONAL_PIPELINE_SLUG"
echo "CONDITIONAL_PIPELINE_SLUG=$(buildkite-agent meta-data get CONDITIONAL_PIPELINE_SLUG)"

buildkite-agent meta-data set "STEPS_KEY_INCLUDE" "$BUILDKITE_PLUGIN_CONDITIONAL_PIPELINE_BUILDER_STEPS_KEY_INCLUDE"
echo "STEPS_KEY_INCLUDE=$STEPS_KEY_INCLUDE"

buildkite-agent meta-data set "STEPS_KEY_INCLUDE_0" "$BUILDKITE_PLUGIN_CONDITIONAL_PIPELINE_BUILDER_STEPS_KEY_INCLUDE_0"
echo "STEPS_KEY_INCLUDE_0=$STEPS_KEY_INCLUDE_0"

buildkite-agent meta-data set "RUN_LINT" "true"

changed_files=$(git diff --name-only origin/main...HEAD)

echo $changed_files
